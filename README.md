# Vertin的小提示 (Vertin's Tips)

一个为 SillyTavern 添加 AI 回复提示音的插件，支持成功/错误分离与神秘模式。

## 功能特性

- 🔔 **智能提示音**：AI 回复完成时自动播放提示音
- ❌ **错误检测**：全面检测并提示 API 错误（支持所有 HTTP 错误码）
- 🎭 **神秘模式**：提供两套不同风格的提示音
- 🎚️ **音量控制**：可调节提示音音量
- 🧪 **测试功能**：内置测试按钮，方便调试

## 安装方法

1. 将 `vertin-tips` 文件夹复制到 SillyTavern 的扩展目录：
   ```
   SillyTavern/public/scripts/extensions/third-party/
   ```

2. 准备音频文件（放在插件的 `audio` 目录下）：
   - `audio/voice.mp3` - 默认成功提示音
   - `audio/error_normal.mp3` - 默认错误提示音
   - `audio/okay.mp3` - 神秘模式成功提示音
   - `audio/error.mp3` - 神秘模式错误提示音

3. 重启 SillyTavern 或刷新页面

## 使用说明

1. 在 SillyTavern 的扩展设置中找到"Vertin的小提示"
2. 勾选"启用提示音"开启功能
3. 可选择开启"神秘模式"切换不同的提示音风格
4. 使用音量滑块调节提示音大小
5. 使用测试按钮预览提示音效果

## 错误检测

插件使用三层错误检测机制，确保捕获所有错误：

### 支持的错误类型
- **HTTP 4xx 错误**：400、401、403、404、429 等
- **HTTP 5xx 错误**：500、502、503、504 等
- **网络错误**：连接失败、超时、DNS 解析失败等
- **API 错误**：认证失败、配额超限、速率限制等

### 检测机制
1. **Fetch 拦截**：底层拦截所有 API 请求
2. **Toastr 拦截**：捕获错误提示消息
3. **事件监听**：监听 SillyTavern 生成事件

## 技术细节

- 基于 SillyTavern 的事件系统
- 使用 ES6 模块化
- 支持实时配置更新
- 防重复播放机制

## 版本历史

### v1.0.0
- 初始版本发布
- 支持成功/错误分离提示音
- 添加神秘模式
- 全面的错误检测机制

## 许可证

MIT License

## 作者

[RaphllA](https://github.com/RaphllA)

## 致谢

- 灵感来自《重返未来：1999》中的维尔汀（Vertin）
- 感谢 SillyTavern 开发团队提供的扩展框架